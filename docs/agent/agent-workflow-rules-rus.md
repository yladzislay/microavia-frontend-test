# Правила Работы для ИИ-Агента

Этот документ описывает согласованные правила работы для ИИ-агента в рамках данного проекта.

## 1. Общие Принципы Работы

1.  **Режим Агента**: Агент работает в режиме активного помощника, выполняя задачи по разработке, обновлению кода и документации, а также информируя пользователя о ходе выполнения.
2.  **Язык**:
    *   Вся документация в проекте ведется на **русском языке**.
    *   Сообщения коммитов оформляются на **английском языке**.
3.  **Инициатива**: Агент может предлагать улучшения или альтернативные подходы, но окончательное решение всегда за пользователем.
4.  **Уточнение**: Если задача не ясна или требует дополнительной информации, агент должен запросить уточнения у пользователя.

## 2. Управление Кодом и Коммитами

1.  **Поэтапные Коммиты**:
    *   Работа делится на логические этапы (согласно `docs/management-rus.md`).
    *   По завершении каждого значимого этапа или подэтапа (как определено пользователем) производится коммит.
    *   Процесс перед коммитом:
        1.  Агент предлагает изменения / реализует функциональность.
        2.  Пользователь ознакамливается и подтверждает корректность ("реализация этапа принята").
        3.  Агент проверяет статус `git status`, добавляет необходимые файлы в staging area (`git add`).
        4.  Агент предлагает сообщение коммита и выполняет коммит после одобрения пользователя.
2.  **Формат Сообщения Коммита**:
    *   `Stage #<номер_этапа_из_management> | <Краткое_описание_этапа_или_реализованной_функциональности_на_английском>`
    *   Пример: `Stage #11 | Study OpenGlobus tools (Ellipsoid, LonLat) & implement initial algorithm helpers`

## 3. Обновление Документации

Агент отвечает за своевременное обновление следующей документации по мере продвижения проекта:

1.  **`docs/development-plan-rus.md`**:
    *   Отмечать выполненные пункты (например, `[x]`).
    *   При необходимости добавлять или детализировать подпункты.
    *   Можно выделять секции для "завершенных этапов разработки", если это будет удобно для навигации по документу.

2.  **`docs/management-rus.md`**:
    *   Обновлять список "Завершённые этапы".
    *   Обновлять список "Дальнейший поэтапный план" при переходе к новым крупным блокам работ или по указанию пользователя (это делает агент после согласования).
    *   Если пользователь предоставляет текст для секции `### Трекинг` (например, время и описание выполненной работы для текущей итерации), агент должен добавить эту информацию в соответствующую итерацию. Агент сам не генерирует временные метки или описания для трекинга.

3.  **`docs/prompts-flow-rus.md`**:
    *   **Каждый `Prompt-Request` от пользователя** (обычно начинающийся с "Prompt-Request #X:") должен быть добавлен агентом в файл `docs/prompts-flow-rus.md`.
    *   Агент должен следовать существующей структуре файла `prompts-flow-rus.md` при добавлении запросов.
    *   Запрос добавляется в соответствующий раздел, который обычно определяет сам пользователь в начале файла `prompts-flow-rus.md` или по ходу его ведения.
    *   Агент должен стремиться добавлять запросы как можно скорее после их получения и обработки.

4.  **Другие Документы**:
    *   При необходимости и по указанию пользователя, агент может создавать новые документы или обновлять существующие (например, `solution-functionality-rus.md`).

## 4. Обработка Ошибок

1.  **Линтер**: Если после внесения изменений линтер обнаруживает ошибки или предупреждения, агент должен сообщить об этом пользователю. Если ошибка связана с изменениями, внесенными агентом, он может предложить исправление.
2.  **Ошибки выполнения**: Если в процессе выполнения команд или кода возникают ошибки, агент должен сообщить о них и, по возможности, предложить пути решения.

*(Этот документ может дополняться по мере необходимости)*