# Правила Работы для ИИ-Агента

Этот документ описывает согласованные правила работы для ИИ-агента в рамках данного проекта.

## 1. Общие Принципы Работы

1.  **Режим Агента**: Агент работает в режиме активного помощника, выполняя задачи по разработке, обновлению кода и документации, а также информируя пользователя о ходе выполнения.
2.  **Язык**:
    *   Вся документация в проекте ведется на **русском языке**.
    *   Сообщения коммитов оформляются на **английском языке**.
3.  **Инициатива**: Агент может предлагать улучшения или альтернативные подходы, но окончательное решение всегда за пользователем.
4.  **Уточнение**: Если задача не ясна или требует дополнительной информации, агент должен запросить уточнения у пользователя.
5.  **Итерационный Подход**:
    *   Работа ведется в итерационном режиме. Длительность и цели итерации определяются пользователем.
    *   В конце каждой итерации агент определяет и предлагает пользователю план на следующую итерацию.
    *   Нумерация и трекинг итераций ведется пользователем в документе `docs/personal-management-rus.md`.

## 2. Управление Кодом и Коммитами

1.  **Поэтапные Коммиты**:
    *   Работа делится на логические этапы и задачи, как правило, согласно `docs/agent/agent-development-plan-rus.md`.
    *   По завершении каждого значимого этапа, задачи или подзадачи (как определено пользователем или планом) производится коммит.
    *   Процесс перед коммитом:
        1.  Агент предлагает изменения / реализует функциональность.
        2.  Пользователь ознакамливается с предложенными изменениями.
        3.  **Пользователь должен дать явное подтверждение, что нет никаких замечаний для доработки, прежде чем агент приступит к оформлению коммита.**
        4.  Агент проверяет статус `git status`, добавляет необходимые файлы в staging area (`git add`).
        5.  Агент предлагает сообщение коммита (согласно формату ниже) и выполняет коммит после одобрения пользователя.
2.  **Формат Сообщения Коммита**:
    *   Предпочтительный формат:
        *   Для задач из плана разработки: `Task #X.Y | <Краткое_описание_задачи_на_английском>` (где X.Y - номер задачи из `agent-development-plan-rus.md`).
        *   Для более общих изменений или фич: `Feature | <Описание_фичи_на_английском>`
        *   Для исправлений: `Fix | <Описание_исправления_на_английском>`
        *   Для обновлений документации: `Docs | <Описание_изменений_в_документации_на_английском>`
    *   Пример: `Task #2.1 | Implement preparePolygon function`

## 3. Обновление Документации

Агент отвечает за своевременное обновление следующей документации по мере продвижения проекта:

1.  **`docs/agent/agent-development-plan-rus.md`**:
    *   Отмечать выполненные пункты (например, `[x]`).
    *   При необходимости добавлять или детализировать подпункты.
    *   Можно выделять секции для "завершенных этапов разработки", если это будет удобно для навигации по документу.

2.  **`docs/agent/agent-prompts-flow-rus.md`**:
    *   **Каждый `Prompt-Request` от пользователя** (обычно начинающийся с уникального идентификатора или нумерации, предоставляемой пользователем) должен быть **строго** до��авлен агентом в файл `docs/agent/agent-prompts-flow-rus.md`.
    *   Агент должен следовать существующей структуре файла `docs/agent/agent-prompts-flow-rus.md` при добавлении запросов.
    *   Запрос добавляется в соответствующий раздел, который обычно определяет сам пользователь в начале файла `docs/agent/agent-prompts-flow-rus.md` или по ходу его ведения.
    *   Агент должен стремиться добавлять запросы как можно скорее после их получения и обработки.

3.  **Другие Документы**:
    *   При необходимости и по указанию пользователя, агент может создавать новые документы или обновлять существующие (например, `docs/analysis/project/solution-functionality-rus.md`).

## 4. Обработка Ошибок

1.  **Линтер**: Если после внесения изменений линтер обнаруживает ошибки или предупреждения, агент должен сообщить об этом пользователю. Если ошибка связана с изменениями, внесенными агентом, он может предложить исправление.
2.  **Ошибки выполнения**: Если в процессе выполнения команд или кода возникают ошибки, агент должен сообщить о них и, по возможности, предложить пути решения.

## 5. Правила Работы с Данными

1.  **Запрет на прямое исследование `polygons.json`**:
    *   Файл `polygons.json` (расположенный в `src/polygons/polygons.json`) **запрещён** для прямого исследования агентом из-за его большого размера.
    *   Вместо него для понимания структуры данных следует использовать документ `docs/analysis/source/polygons-json-structure-analysis-rus.md`.

*(Этот документ может дополняться по мере необходимости)*
