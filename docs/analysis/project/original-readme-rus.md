# Алгоритм Генерации Параллельных Линий для Полигона

Реализуйте алгоритм, который генерирует набор параллельных линий для заданного полигона. Линии должны строиться с указанным шагом, углом направления относительно Севера и отступом.
Сцена визуализации и инструменты для рисования уже подготовлены — ваша задача сгенерировать корректный набор координат линий для полигона.
---
###### Результат ознакомления:
- [] Генерация набора параллельных линий для заданного полигона.
- [] Линии должны строиться с указанным шагом, углом направления относительно Севера и отступом.

## Входные Параметры

- **`polygonCoordinates`**: Массив координат, описывающий один полигон (без отверстий) в формате KML. Полигон определяется как массив пар `[долгота, широта]`, где первая и последняя координаты совпадают (замкнутый полигон). Например:

  ```ts
  [
    [55.5487277195291, 24.35455341474017],
    [55.52483599504373, 24.18609028446061],
    [55.66944139410629, 24.16878452908807],
    [55.69352433077309, 24.33724790559794],
    [55.5487277195291, 24.35455341474017]
  ]
  ```

- **`step`** *(по умолчанию = 100)*: Расстояние между соседними параллельными линиями, в **метрах**.

- **`bearing`** *(по умолчанию = 0)*: Ориентация линий, в **градусах от Севера** (0° = Север, 90° = Восток, и т.д.).

- **`offset`** *(по умолчанию = 50)*: Внешний отступ в **метрах** от края полигона (линии должны начинаться и заканчиваться на "offset" метров за пределами полигона).

---

## Требования

- Реализуйте алгоритм в файле:

  ```
  src/lines/parallelHatchingAlgorithm.ts
  ```

  в виде следующей функции:

  ```ts
  export function createParallelHatching(options: {
    polygonCoordinates: number[][],
    step?: number,
    bearing?: number,
    offset?: number
  }): LonLat[][] {
    //...
  }
  ```

- Эта функция будет вызываться из:

  ```
  src/main.ts
  ```

  по событию двойного клика на полигоне. Функция отрисовки линий также находится там.

- Изменение `step`, `bearing` или `offset` должно обновлять отрисованные линии на карте.

- Результат должен визуально соответствовать поведению, продемонстрированному в эталонном [видео](https://filebin.net/pm0fr12do1foxunw/example.mp4) (равное и корректное расстояние между линиями, правильная ориентация, равное и корректное расстояние от края полигона до начала/конца линии, вся площадь полигона должна быть заштрихована линиями).

- Обеспечьте оптимизацию производительности для эффективной обработки больших полигонов.

- Пожалуйста, поделитесь своей реализацией алгоритма, используя форк этой [песочницы](https://codesandbox.io/p/devbox/jwhg43?file=%2Fpackage.json) или отправьте его обратно в архиве как полный проект.

---

## Доступные Инструменты

Вы можете использовать следующие служебные классы из библиотеки [OpenGlobus](https://github.com/openglobus/openglobus):

- [LonLat](https://github.com/openglobus/openglobus/blob/master/src/LonLat.ts) – Представление географических координат.
- [Vec2](https://github.com/openglobus/openglobus/blob/master/src/math/Vec2.ts), [Vec3](https://github.com/openglobus/openglobus/blob/master/src/math/Vec3.ts) – Утилиты для работы с векторами.
- [Ellipsoid](https://github.com/openglobus/openglobus/blob/master/src/ellipsoid/Ellipsoid.ts) – Для решения прямых и обратных геодезических задач, вычисления расстояний, азимутов и конечных точек на эллипсоиде.
- Вы также можете использовать любые другие библиотеки, которые сочтете полезными.
---

## Опционально

- Добавьте небольшой UI-виджет для динамической настройки:
  - Расстояния между линиями (`step`)
  - Ориентации линий (`bearing`)
  - Отступа (`offset`)

---

## Проверка Результата

- Визуально проверьте результат с помощью встроенного инструмента "линейка" на карте.
- Линии должны быть прямыми, правильно расположенными и ограниченными полигонами.

## Пример Видео

[Смотреть видео](https://filebin.net/pm0fr12do1foxunw/example.mp4)

---

## Запуск сцены
Для локального запуска сцены используйте следующую команду:

```bash
npm run dev
```
```