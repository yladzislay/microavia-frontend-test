# Список Требований

## Основные Требования

- [x] **Реализация алгоритма генерации параллельных линий:**
    - [x] Алгоритм должен генерировать набор параллельных линий для заданного полигона.
    - [x] Линии должны строиться с указанным шагом (`step`), углом направления относительно Севера (`bearing`) и отступом (`offset`).
    - [x] Реализовать алгоритм в файле `src/lines/parallelHatchingAlgorithm.ts`.
    - [x] Функция должна иметь следующую сигнатуру:
        ```ts
        export function createParallelHatching(options: {
          polygonCoordinates: number[][],
          step?: number,
          bearing?: number,
          offset?: number
        }): LonLat[][] {
          //...
        }
        ```

- [x] **Интеграция с существующей системой:**
    - [x] Функция `createParallelHatching` будет вызываться из `src/main.ts` по событию двойного клика на полигоне.
    - [x] Изменение параметров `step`, `bearing` или `offset` должно динамически обновлять отрисованные линии на карте.

- [x] **Визуальное соответствие:**
    - [x] Результат должен визуально соответствовать поведению, продемонстрированному в эталонном видео.
    - [x] Равное и корректное расстояние между линиями.
    - [x] Правильная ориентация линий.
    - [x] Равное и корректное расстояние от края полигона до начала/конца линии.
    - [x] Вся площадь полигона должна быть заштрихована линиями.

- [ ] **Производительность:**
    - [ ] Обеспечить оптимизацию производительности для эффективной обработки больших полигонов.

- [ ] **Предоставление результата:**
    - [ ] Поделиться реализацией алгоритма, используя форк предоставленной песочницы ([https://codesandbox.io/p/devbox/jwhg43?file=%2Fpackage.json](https://codesandbox.io/p/devbox/jwhg43?file=%2Fpackage.json)) или отправить его обратно в архиве как полный проект.

## Входные Параметры Алгоритма

- [x] **`polygonCoordinates`**: Массив координат `[долгота, широта]`, описывающий один замкнутый полигон (без отверстий) в формате KML.
- [x] **`step`** (по умолчанию = 100): Расстояние между соседними параллельными линиями, в метрах.
- [x] **`bearing`** (по умолчанию = 0): Ориентация линий, в градусах от Севера (0° = Север, 90° = Восток, и т.д.).
- [x] **`offset`** (по умолчанию = 50): Внешний отступ в метрах от края полигона (линии должны начинаться и заканчиваться на "offset" метров за пределами полигона).

## Проверка Результата

1.  **Визуальная проверка:**
    - [x] Использовать встроенный инструмент "линейка" на карте для проверки.
    - [x] Линии должны быть прямыми.
    - [x] Линии должны быть правильно расположенными (корректный шаг и ориентация).
    - [x] Линии должны быть ограничены полигонами (с учетом отступа).

## Опциональные Требования

1.  **UI-виджет для динамической настройки:**
    - [ ] Добавить небольшой UI-виджет для интерактивного изменения:
        - [ ] Расстояния между линиями (`step`).
        - [ ] Ориентации линий (`bearing`).
        - [ ] Отступа (`offset`).

## Доступные Инструменты

- [x] Можно использовать служебные классы из библиотеки [OpenGlobus](https://github.com/openglobus/openglobus):
    - [x] `LonLat`
    - [ ] `Vec2`, `Vec3`
    - [ ] `Ellipsoid`
- [x] Разрешено использовать любые другие библиотеки по усмотрению.

## Запуск Проекта

- [x] Для локального запуска сцены использовать команду: `npm run dev`.
