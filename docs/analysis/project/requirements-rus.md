# Список Требований

## Основные Требования

- [ ] **Реализация алгоритма генерации параллельных линий:**
    - [ ] Алгоритм должен генерировать набор параллельных линий для заданного полигона.
    - [ ] Линии должны строиться с указанным шагом (`step`), углом направления относительно Севера (`bearing`) и отступом (`offset`).
    - [ ] Реализовать алгоритм в файле `src/lines/parallelHatchingAlgorithm.ts`.
    - [ ] Функция должна иметь следующую сигнатуру:
        ```ts
        export function createParallelHatching(options: {
          polygonCoordinates: number[][],
          step?: number,
          bearing?: number,
          offset?: number
        }): LonLat[][] {
          //...
        }
        ```

- [ ] **Интеграция с существующей системой:**
    - [ ] Функция `createParallelHatching` будет вызываться из `src/main.ts` по событию двойного клика на полигоне.
    - [ ] Изменение параметров `step`, `bearing` или `offset` должно динамически обновлять отрисованные линии на карте.

- [ ] **Визуальное соответствие:**
    - [ ] Результат должен визуально соответствовать поведению, продемонстрированному в эталонном видео.
    - [ ] Равное и корректное расстояние между линиями.
    - [ ] Правильная ориентация линий.
    - [ ] Равное и корректное расстояние от края полигона до начала/конца линии.
    - [ ] Вся площадь полигона должна быть заштрихована линиями.

- [ ] **Производительность:**
    - [ ] Обеспечить оптимизацию производительности для эффективной обработки больших полигонов.

- [ ] **Предоставление результата:**
    - [ ] Поделиться реализацией алгоритма, используя форк предоставленной песочницы ([https://codesandbox.io/p/devbox/jwhg43?file=%2Fpackage.json](https://codesandbox.io/p/devbox/jwhg43?file=%2Fpackage.json)) или отправить его обратно в архиве как полный проект.

## Входные Параметры Алгоритма

- [ ] **`polygonCoordinates`**: Массив координат `[долгота, широта]`, описывающий один замкнутый полигон (без отверстий) в формате KML.
- [ ] **`step`** (по умолчанию = 100): Расстояние между соседними параллельными линиями, в метрах.
- [ ] **`bearing`** (по умолчанию = 0): Ориентация линий, в градусах от Севера (0° = Север, 90° = Восток, и т.д.).
- [ ] **`offset`** (по умолчанию = 50): Внешний отступ в метрах от края полигона (линии должны начинаться и заканчиваться на "offset" метров за пределами полигона).

## Проверка Результата

1.  **Визуальная проверка:**
    - [ ] Использовать встроенный инструмент "линейка" на карте для проверки.
    - [ ] Линии должны быть прямыми.
    - [ ] Линии должны быть правильно расположенными (корректный шаг и ориентация).
    - [ ] Линии должны быть ограничены полигонами (с учетом отступа).

## Опциональные Требования

1.  **UI-виджет для динамической настройки:**
    - [ ] Добавить небольшой UI-виджет для интерактивного изменения:
        - [ ] Расстояния между линиями (`step`).
        - [ ] Ориентации линий (`bearing`).
        - [ ] Отступа (`offset`).

## Доступные Инструменты

- [ ] Можно использовать служебные классы из библиотеки [OpenGlobus](https://github.com/openglobus/openglobus):
    - [ ] `LonLat`
    - [ ] `Vec2`, `Vec3`
    - [ ] `Ellipsoid`
- [ ] Разрешено использовать любые другие библиотеки по усмотрению.

## Запуск Проекта

- [ ] Для локального запуска сцены использовать команду: `npm run dev`.